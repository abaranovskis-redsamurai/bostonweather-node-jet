define(["ojs/ojcore","knockout","jquery","text!../viewModels/data/boston_weather_clean.json","ojs/ojchart","ojs/ojlegend","toolbar-comp/loader"],function(e,o,r,a){return new function(){var t=this;t.currentyearattr=o.observable();var l=new e.ColorAttributeGroupHandler;l.addMatchRule("high","#ed6647"),l.addMatchRule("low","#267db3");var n=[],i=[],u=JSON.parse(a);r.each(u,function(e,o){2017===o.Year&&(n.push(o["High Temp (F)"]),i.push(o["Low Temp (F)"]))});for(var s=function(e,o,r,a){for(var t=[],l=(a-r)/o,n=0;n<o;n++)t.push(0);for(var i=0;i<e.length;i++)t[Math.floor(e[i]/l)]++;return t},h=[{name:"Highs Frequency",items:s(n,20,0,100),color:l.getValue("high")}],c=[{name:"Lows Frequency",items:s(i,20,0,100),color:l.getValue("low")}],g=[],m=0;m<20;m++)g.push(5*m+1+"-"+5*(m+1));t.barHighsSeriesValue=o.observableArray(h),t.barLowsSeriesValue=o.observableArray(c),t.barGroupsValue=o.observableArray(g);var b=[{name:"High",items:n,color:l.getValue("high")},{name:"Low",items:i,color:l.getValue("low")}],p=[];for(m=0;m<365;m++)p.push(new Date(14832468e5+864e5*m).toISOString());t.lineSeriesValue=o.observableArray(b),t.lineGroupsValue=o.observableArray(p),t.legendSections=[{items:[{color:l.getValue("high"),text:"High",id:"high"},{color:l.getValue("low"),text:"Low",id:"low"}]}],t.handleYearSelection=function(e){var o=e.detail.value;n=[],i=[];var u=JSON.parse(a);r.each(u,function(e,r){r.Year===o&&(n.push(r["High Temp (F)"]),i.push(r["Low Temp (F)"]))});for(var h=[{name:"Highs Frequency",items:s(n,20,0,100),color:l.getValue("high")}],c=[{name:"Lows Frequency",items:s(i,20,0,100),color:l.getValue("low")}],g=[],m=0;m<20;m++)g.push(5*m+1+"-"+5*(m+1));t.barHighsSeriesValue(h),t.barLowsSeriesValue(c),t.barGroupsValue(g);var b=[{name:"High",items:n,color:l.getValue("high")},{name:"Low",items:i,color:l.getValue("low")}],p=[],w=11991636e5,d=366;for(2008===o?(w=11991636e5,d=366):2009===o?(w=1230786e6,d=365):2010===o?(w=1262322e6,d=365):2011===o?(w=1293858e6,d=366):2012===o?(w=1325394e6,d=366):2013===o?(w=13570164e5,d=366):2014===o?(w=13885524e5,d=366):2015===o?(w=14200884e5,d=366):2016===o?(w=14516244e5,d=366):2017===o?(w=14832468e5,d=366):2018===o&&(w=15147828e5,d=366),m=0;m<d;m++)p.push(new Date(w+864e5*m).toISOString());t.lineSeriesValue(b),t.lineGroupsValue(p)},t.connected=function(){},t.disconnected=function(){},t.transitionCompleted=function(){}}});